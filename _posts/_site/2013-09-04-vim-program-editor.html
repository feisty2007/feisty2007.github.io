<p>###简介</p>

<p>Vim在程序员当中被广泛使用。因为易用易扩展，vim成为编写大量代码的好帮手。这丝毫不应该让人诧异。</p>

<p>###简单入门</p>

<p>vim最容易帮助你的特征是其代码高亮功能。它会让你编写代码更快，避免出错，更容易“看清”代码。</p>

<p>####代码高亮</p>

<p>如果你正在编写一个vim高亮文件，你可以运行:set filetype=vim，就会看到vim会给你的文件着色。如果你编辑Python程序，就允许:set filetype=python.</p>

<p>你可以在$VIMRUNTIME/syntax/目录下面看到vim支持的语言类型。</p>

<p>####智能缩进</p>

<p>有经验的程序员一般都会按照程序结构来进行缩进，以便更容易看清程序的结构和来龙去脉。vim会帮你做到这一点。</p>

<p>如果你希望下一行和本行缩进到一个水平，请使用:set autoindent。</p>

<p>如果你希望一段文字自动缩进，可以使用:set smartindent设定。注意：缩进行为根据编程语言的不同而不同。</p>

<p>####跳跃</p>

<p>如果你的程序有“{}”包围的一段文字，你可以按%来跳到当前{或者}对应的}和{。</p>

<p>####Shell命令</p>

<p>你可以在vim内部使用:!来运行Shell命令。</p>

<p>譬如，如果你的操作系统支持date命令，那么你运行:!date 就会看到当前日期。</p>

<p>这个功能非常实用，如果你想在文件夹里面查找某个文件，就可以使用:!ls 或者:!dir。</p>

<p>如果希望进入shell，就输入:sh。</p>

<p>我们可以利用这个功能来进行一些编辑操作。譬如你想排序当前编辑的文件，你可以使用:!sort来进行，并把结果输出到屏幕。</p>

<p>####跳转</p>

<p>有几种方法可以在代码之间跳跃：</p>

<ul>
  <li>
    <p>把光标放到代码里面的文件上面，然后按下gf就会打开文件。</p>
  </li>
  <li>
    <p>把光标放到局部变量上面，按gd就会返回到变量的声明处。gD可以查找全局变量。</p>
  </li>
  <li>
    <p>使用]]。</p>
  </li>
</ul>

<p>查看:help 29.3, :help 29.4, 和:help 29.5会看到更多信息。</p>

<p>###浏览代码</p>

<p>####文件系统
使用:Vex 或者 :Sex在vim内部打开所需文件。</p>

<p>####ctags</p>

<p>我们已经看懂如何简单的在一个文件内部进行移动查看，如何在不同的文件之间来回移动呢？这里，我们可以使用标签（tags）。</p>

<p>这里使用taglist.vim插件。</p>

<p>1、安装Exuberant ctags。</p>

<p>2、安装taglist.vim.</p>

<p>3、运行:TlistToggle打开标签列表窗口。现在你就可以看到程序的东西-宏、类型定义、变量定义和函数。</p>

<p>4、你可以使用:tag foo来跳到foo的定义。</p>

<p>5、把光标放到任何一个符号上面，按下Ctrl-l就可以跳到它的定义。ctrl-t跳转回来。</p>

<p>6、使用ctrl w ]来一个分割窗口里面产科一个符号的定义。</p>

<p>7、使用:tnext,:tprev,:tfirst,:tlast在不同的tag直接移动。</p>

<p>现在exuberant Ctags支持33种编程语言，并且非常容易扩展来支持更多的语言。</p>

<p>####cscope</p>

<p>为了支持不同的文件之间查找，需要一个程序-cscope。但是人如其名，这个程序只支持C语言。</p>

<p>1、安装cscope。请查看:help cscope-info和:help cscope-win32。</p>

<p>2、拷贝cscope_maps.vim到~/.vim/plugin/ 目录。</p>

<p>3、到程序目录，运行 cscope -R -b来建立你的程序数据库。</p>

<p>4、重启Vim，并打开一个程序文件。</p>

<p>5、运行:cscope show 会看到，一个cscope连接已经建立。</p>

<p>6、运行:cscope find synbol foo来查找foo，也可以缩写成 :cs f s foo。</p>

<p>还可以：</p>

<ul>
  <li>
    <p>查找定义 :cs f g</p>
  </li>
  <li>
    <p>查找此函数调用的函数 :cs f d</p>
  </li>
  <li>
    <p>查找调用此函数的函数 : cs f c</p>
  </li>
  <li>
    <p>查找文本 :cs f t</p>
  </li>
  <li>
    <p>以egrep方式查找 :cs f e</p>
  </li>
</ul>

<p>查看 :help cscope-suggestions来查看更多cscope使用建议。</p>

<p>另外,the Source Code Obedience插件非常值得使用，它提供了很多有用的cscope/ctags访问快捷键。</p>

<p>同时如果我们使用C语言，cvim插件将非常值得推荐。</p>

<p>###编译</p>

<p>在前面章节，我们已经看到 :make，这里不再重复。</p>

<p>###易于编码</p>

<p>####自动完成</p>

<p>在vim7里面最希望添加的功能是“自动完成”-根据上下文提供选择输入。譬如，你使用了一个名字很长的变量，并且需要经常使用他，你可以使用快捷键告诉vim，vim会自动补充剩余的其它内容。</p>

<p>vim在这里使用文件类型插件来完成这个功能，一般在ftplugin/language-complete.vim里面，譬如pythoncomplete.vim。</p>

<p>一个简单的Python例子：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def hello():
	print 'hello world'
def helpme():
	print 'help yourself'	
</code></pre></div></div>

<p>当开始输入代码时候，输入“he”，然后按下ctrl-x ctrl-o，vim会出现提示，帮助你完成输入。</p>

<p>如果出现 E764:Option ‘Omnifunc’ is not set错误，可以运行 :runtime! autoload/pythoncomplete.vim来载入插件。</p>

<p>为了避免每一个都需要输入，在~/.vimrc里面添加一行：</p>

 	autocmd FileType python runtime! autoload/pythoncomplete.vim

<p>vim默认使用第一个提示，可以使用ctrl-n或者ctrl-p来选择。</p>

<p>如果你不想使用，按下Esc。</p>

<p>在 :help new-omni-completion来查看语言支持（包括C、Html、Javascript、PHP、Python、Ruby、SQL、XML等）。</p>

<p>我一般使用Ctrl-space来代替Ctrl-x ctrl-o，可以在vimrc里面配置：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>imap &lt;c-space&gt; &lt;c-x&gt;&lt;c-o&gt;
</code></pre></div></div>

<p>####使用代码片度</p>

<p>代码片度就是你经常使用的一小段程序代码。你也可以通过插件来插入。这里，我们使用SnippetEmu插件。</p>

<p>1、下载snippetsEmu插件。</p>

<p>2、如果~/.vim/after目录不存在，就建立这个目录。</p>

<p>3、通过vim命令行启动插件。譬如 gvim snippy_bundles.vba</p>

<p>4、运行 :source %。“vimball”就会解压文件到目录。</p>

<p>5、使用snippy_plugin.vba重复上面的步骤。</p>

<p>现在使用：</p>

<p>1、打开文件test.py</p>

<p>2、输入def,然后按Tab</p>

<p>3、你会看到snippetsEmu已经产生了Python函数的构架。大概如下：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def &lt;{fname}&gt;(&lt;{args}&gt;):
	"""
	&lt;{}&gt;
	&lt;{args}&gt;"""
	&lt;{pass}&gt;
	&lt;{}&gt;
</code></pre></div></div>

<p>4、把光标移动到函数的名称，fname</p>

<p>5、输入名称</p>

<p>6、按下Tab键会自动跳到函数的参数字段。</p>

<p>7、输入函数注释，譬如：Just say Hi</p>

<p>8、按下Tab键，输入： print ‘Hello World</p>

<p>9、按下Tab</p>

<p>10、函数完成</p>

<p>结果如下：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def test():
    """
    Just say Hi
    """
    print 'Hello World'
</code></pre></div></div>

<p>####自建代码片段</p>

<p>怎么建立我们自己的代码片段呢？</p>

<p>譬如ActionScript3里面，我经常需要输入下面类似的代码：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>private var _foo:Object;
public function get foo():Object
{
    return _foo;
}
public function set foo(value:Object)
{
    _foo = value;
}	
</code></pre></div></div>

<p>这是一个非常简单的getter/setter变量封装代码。问题是经常我们需要这样封装很多这样的变量，每次都需要这样类似的代码。让我们看如何使用代码片度自动完成。</p>

<p>SnippetEmu使用st来代表一个标签的开始，et来代表一个标签的结束。</p>

<p>譬如下面的例子：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>exec "Snippet pubfun public function
".st.et.":".st.et."&lt;CR&gt;{&lt;CR&gt;".st.et."&lt;CR&gt;}&lt;CR&gt;"	
</code></pre></div></div>

<p>这是~/.vim/after/ftplugin/actionscript_snippets.vim里面的一行。</p>

<p>现在新建一个名字为test.as的文件，输入pubfun,按下Tab，就会产生：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>public function &lt;{}&gt;:&lt;{}&gt;
{

}	
</code></pre></div></div>

<p>按下Tab键就可以在函数名称和返回参数之间切换，进行输入。</p>

<p>回到前面的问题，下面是我们getter/setter的解决方法：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>exec "Snippet getset private var _".st."name".et.";&lt;CR&gt;&lt;CR&gt;public
function get ".st."name".et."():".st."type".et."&lt;CR&gt;{&lt;CR&gt;&lt;tab&gt;return
_".st."name".et.";&lt;CR&gt;}&lt;CR&gt;&lt;CR&gt;public function set
".st."name".et."(value:".st."type".et.")&lt;CR&gt;{&lt;CR&gt;&lt;tab&gt;_".st."name".et."
= value;&lt;CR&gt;}&lt;CR&gt;"
 Note
</code></pre></div></div>

<p>1、把上面一行加入到~/.vim/after/ftplugin/actionscript_snippets.vim。</p>

<p>2、现在新建一个名字为test.as的文件</p>

<p>3、输入getset,按下Tab，就会产生：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>private var _&lt;{name}&gt;;
public function get &lt;{name}&gt;():&lt;{type}&gt;
{
        return _&lt;{name}&gt;;
}
public function set &lt;{name}&gt;(value:&lt;{type}&gt;)
{
        _&lt;{name}&gt; = value;
}
</code></pre></div></div>

<p>4、输入color，然后按下Tab。</p>

<p>5、输入Number，按下Tab，代码会变成：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>private var _color;
public function get color():Number
{
        return _color;
}
public function set color(value:Number)
{
        _color = value;
}	
</code></pre></div></div>

<p>看看我们降低了多少次键盘敲击！只需一行，就在vim里面产生了11行的代码。</p>

<p>根据实际需要，我们可以更多的实用代码片段。</p>

<p>###IDE</p>

<p>vim在插件的帮助下也可以完成IDE的一些功能。</p>

<p>####项目管理插件</p>

<p>Project插件可以帮助vim完成项目管理任务。</p>

<p>1、下载project插件</p>

<p>2、解压到~/.vim/目录</p>

<p>3、运行 :helptags ~/.vim/doc/</p>

<p>4、从http://www.vim/org/subversion.php下载vim源代码</p>

<p>5、运行 ：Project命令，就会出现一个侧边栏，类似于项目管理窗口。</p>

<p>6、运行2个\ 和 c。</p>

<p>7、输入下面配置</p>

<ul>
  <li>Name 输入’vim7_src’</li>
  <li>Directory，选择vim7源代码目录</li>
  <li>CD同Directory</li>
  <li>Filter，输入<em>h,</em>c</li>
</ul>

<p>8、你会看到侧边栏窗口里面出来了文件列表</p>

<p>9、使用j/k在文件列表里面浏览，输入enter来主窗口打开文件。</p>

<p>这样就提高了非常类似于IDE界面的体验，同其它IDE需要繁琐的路径指定和配置文件，Project显得相当直接有效。</p>

<p>####直接运行vim文本</p>

<p>EvalSelection.vim提高了直接运行vim选择代码的能力，inc-python.vim也可以而且更简单。</p>

<p>####SCM集成</p>

<p>如果你希望从版本管理系统里面签出文件,你可以使用perforce插件，还有CVS/SVN/SVK/Git插件。</p>

<p>####补充</p>

<p>vim IDE更详细的解说，可以参阅：</p>

<ul>
  <li>
    <p>Vim Tip: Using vim as an IDE all in one</p>
  </li>
  <li>
    <p>C++/Python Vim+IDE plugins list</p>
  </li>
</ul>

<p>有很多特定类型的编程语言插件值得使用。譬如Python：</p>

<ul>
  <li>
    <p>SuperTab 允许你使用tab来自动完成。</p>
  </li>
  <li>
    <p>python-calltips会在底部显示一个完成列表。最酷的是还显示每一个可能输入的文档。</p>
  </li>
  <li>
    <p>VimPdb 运行你在vim内部调试Python</p>
  </li>
</ul>

<p>###编写你自己的插件</p>

<p>你可以根据自己的需要来编写vim插件。譬如，你又下面的需求：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>编写一个插件，可以根据当前单词来打开浏览器查看相关信息。
</code></pre></div></div>

<p>我的实现大体如下：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>" Add the following lines to your ~/.vimrc to enable online documentation
" Inspiration: http://vim.wikia.com/wiki/Online_documentation_for_word_under_cursor
function Browser()
    if has("win32") || has("win64")
		let s:browser = "C:\\Program Files\\Mozilla Firefox\\firefox.exe -new-tab"
    elseif has("win32unix") " Cygwin
		let s:browser = "'/cygdrive/c/Program\ Files/Mozilla\Firefox/firefox.exe' -new-tab"
    elseif has("mac") || has("macunix") || has("unix")
        let s:browser = "firefox -new-tab"
    endif
    return s:browser
endfunction

function Run(command)
    if has("win32") || has("win64")
        let s:startCommand = "!start"
        let s:endCommand = ""
    elseif has("mac") || has("macunix") " TODO Untested on Mac
        let s:startCommand = "!open -a"
        let s:endCommand = ""
    elseif has("unix") || has("win32unix")
        let s:startCommand = "!"
	  	let s:endCommand = "&amp;"
	    else
	        echo "Don't know how to handle this OS!"
	        finish
	    endif

	let s:cmd = "silent " . s:startCommand . " " . a:command . " " .
	s:endCommand
	" echo s:cmd
	execute s:cmd
endfunction

function OnlineDoc()
	    if &amp;filetype == "viki"
	        " Dictionary
			let s:urlTemplate = "http://dictionary.reference.com/browse/&lt;name&gt;"
	    elseif &amp;filetype == "perl"
			let s:urlTemplate = "http://perldoc.perl.org/functions/&lt;name&gt;.html"
	    elseif &amp;filetype == "python"
			let s:urlTemplate =	"http://www.google.com/search?q=&lt;name&gt;&amp;domains=docs.python.org&amp;sitesearch=docs.ython.org"
	    elseif &amp;filetype == "ruby"
			let s:urlTemplate = "http://www.ruby-doc.org/core/classes/&lt;name&gt;.html"
	    elseif &amp;filetype == "vim"
			let s:urlTemplate =	"http://vimdoc.sourceforge.net/search.php?search=&lt;name&gt;&amp;docs=help"
	    endif
	    	let s:wordUnderCursor = expand("&lt;cword&gt;")
			let s:url = substitute(s:urlTemplate, '&lt;name&gt;', s:wordUnderCursor, 'g')
	    call Run(Browser() . " " . s:url)
endfunction

noremap &lt;silent&gt; &lt;M-d&gt; :call OnlineDoc()&lt;CR&gt;
inoremap &lt;silent&gt; &lt;M-d&gt; &lt;Esc&gt;:call OnlineDoc()&lt;CR&gt;a
</code></pre></div></div>

<p>###访问数据库</p>

<p>使用dbext.vim插件，你可以访问超过10种数据库系统，包括Oracle、MySQL、PostgreSQL、Sybase和SQLite等。最好的地方是这个插件可以帮助你在PHP、Perl、Java里面编辑SQL语句，甚至可以直接执行代码里面的SQL语句。</p>

<p>###总结</p>

<p>上面我们看到了，如何通过插件和设定来帮助编程。如果需要，我们就可以自己编写一个插件来实现这个特征。</p>

<p>强力推荐Stack Overflow和Peteris Krumins的博客，那里有更多相关内容。</p>

